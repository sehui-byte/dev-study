##### 이번주 주제도 JSON입니다.



###### 목차

###### 1.JSON의 데이터 타입

###### 2.JSON의 스키마와 검증

######		2-1)JSON 스키마(schema)

######		2-2)JSON 스키마 검증(validation)

######		2-3)검증 키워드(validation keywords)

######		2-4)다양한 데이터들의 검증



====================================== 내용 =================================

- **1.JSON의 데이터 타입**

  - 지난주 차 소개에서 JSON의 데이터를 한데 모아 예시로 말씀드렸었습니다. 이번에는 그 요소들을 JSON에서의 데이터 값으로 사용할 수 있는 다양한 타입을 파헤쳐 보도록 하겠습니다. JSON에서 제공하는 기본 타입은 다음과 같습니다.

    - 1. 숫자(number)

      2. 문자열(string)

      3. 불리언(boolean)

      4. 객체(object)

      5. 배열(array)

      6. null

         > > ​	JSON에서 나타낼 수 있는 각자의 타입별로 하나씩 살펴보도록 하겠습니다.

         

    - #### 1.숫자(number)

      JSON에서 나타낼 수 있는 숫자의 종류입니다.

      1. 정수(integer) : 소수부분이 없는 수를 의미합니다.

         - ```json
           {
             "age": 1
           }
           ```

           

      2. 실수(fraction) : 소수 부분을 가지는 수를 의미합니다.

         - ```json
           {
             "weight": 2.14
           }
           ```

           

      3. 지수(exponent) : e 표기법을 사용해 지수로 표현하는 수를 의미합니다.

         - ```json
           {
             "size": 5.8426e+2
           }
           ```

      

    - **2.문자열(string)**

    - 문자열은 일련의 연속된 문자의 집합을 의미합니다. 이러한 문자열은 큰따옴표("") 안에 유니코드 문자들의 나열로 구성됩니다.

      더불어 JSON에서 역슬래시(\) 문자는 특정 문자와 함께 사용되어 이스케이프 시퀀스(escape sequence)로 사용됩니다. 따라서 JSON 문자열에는 역슬래시(\)와 큰따옴표(")를 바로 사용할 수 없으며, 이스케이프 시퀀스로 표현해야 합니다.

      - 예제 1

        ```json
        {
          	"name": "아리아나"
        }
        ```

        > > **자바스크립트 에서는 문자열을 표현할 때 큰따옴표("")와 작은따옴표('')를 모두 사용할 수 있지만, JSON에서는 오직 큰따옴표("")만을 사용할 수 있습니다. (주의할 점!)**

        

      - #### 이스케이프 시퀀스(escape sequence)

        - 이스케이프 시퀀스(escape sequence)는 문자열이 화면에 출력될 때 사용하게 될 특수한 문자를 위해 만들어졌습니다. 이러한 이스케이프 시퀀스는 역슬래시(\)와 특정 문자와의 조합으로 사용할 수 있습니다.

        - | 이스케이프  시퀀스 | 설명                                  |
          | ------------------ | ------------------------------------- |
          | \b                 | 백스페이스                            |
          | \f                 | 폼 피드(form feed)                    |
          | \n                 | 개행                                  |
          | \r                 | 캐리지 리턴(carriage return)          |
          | \t                 | 탭(tab)                               |
          | \"                 | 큰따옴표                              |
          | \/                 | 슬래시                                |
          | \\                 | 역슬래시                              |
          | \uHHHH             | 16진수 네 자리로 표현된 유니코드 문자 |

          > > 이스케이프 시퀀스의 상세 내용이 궁금하신 분은 아래의 링크를 클릭 해주세요!

          - https://atomic0x90.github.io/c-language/2019/05/28/C-Language-escape-sequence.html (이스케이프 시퀀스의 기능 설명 및 예제)

            

        - 이스케이프 시퀀스를 활용한 예제 2

          ```json
          {
              "comment": "안녕하세요. \"제 이름은\" \"아리아나\" 입니다."
          }
          ```

          - ![](C:\Users\quddb\Desktop\json5.PNG)

            

          > JSON 파서(parser)는 우선 JSON 데이터를 모두 읽어 들입니다. 위의 예제처럼 큰따옴표를 이스케이프 시퀀스(\")로 표현하지 않았다면, 식빵이라는 문자열 앞에 있는 큰따옴표에서 문자열이 모두 끝났다고 인식할 것입니다.

          

          > > 따라서 JSON 파서는 오류를 발생시킬 것입니다.
          > >
          > > **문자열 내에서 큰따옴표나 역슬래시를 표현하기 위해서는 반드시 이스케이프 시퀀스를 사용하여 JSON 파서에 해당 따옴표는 문자열을 끝내는 따옴표가 아니라는 사실을 알려주어야만 합니다.**

          

    - #### 3.불리언(boolean)

      JSON에서 불리언 값은 참(true)과 거짓(false)을 표현합니다.

      일부 다른 프로그래밍 언어에서는 true 값으로 1을, false 값으로 0을 대신 사용할 수 있습니다.

      또한, 대소문자의 구분 없이 True, TRUE, False, FALSE 등을 모두 사용할 수 있는 언어도 존재합니다. 하지만 JSON에서 불리언 값은 항상 true와 false를 소문자로 표기해서 사용해야 합니다.

      - 예제

        ```json
        {
            "name": "아리아나",
            "lineage": true		
        }
        ```

        

    - #### 4.객체(object)

      JSON에서 객체(object)란 데이터 이름과 값의 한 쌍으로 구성된 프로퍼티의 정렬되지 않은 집합을 의미합니다. 이러한 JSON 객체는 중괄호({})로 둘러싸여 있습니다.

      객체에 저장되는 프로퍼티(property)는 데이터 이름과 값의 한 쌍으로 이루어져 있습니다.

      JSON 객체는 쉼표(,)를 사용하여 이러한 프로퍼티를 여러 개 가질 수 있습니다. 이때 프로퍼티의 순서는 중요하지 않으며, 데이터의 이름은 문자열로 반드시 큰따옴표("")를 사용해야 합니다.

      - 예제 1

        ```json
        {
            "name": "아리아나",
            "family": "순수 혈통 아리아인",
            "age": 28,
            "weight": 48
        }
        ```

      

      - #### 객체 안의 객체

        JSON에서 데이터 이름과 대응되는 값으로 숫자, 문자열, 불리언뿐만 아니라 또 다른 객체가 올 수도 있습니다. 만약 데이터의 값이 객체라면 객체 안에 객체가 포함되는 계층 구조가 형성됩니다.

        - 예제 2

          ```json
          {
              "Person": {
                  "name": "아리아나",
                  "family": "순수 혈통 아리아인",
                  "age": 1,
                  "weight": 2.14,
                  "family": {
                      "breadwinner": "아리스",
                      "phone": "01012345678"
                  }
              }
          }
          ```

          - 위의 예제에서 가장 상위 계층의 데이터 이름은 "Person"이며, 데이터값으로 다섯 개의 또 다른 데이터를 가지고 있습니다.

            그중에서 다섯 번째 데이터인 "family" 객체는 "breadwinner"과 "phone"이라는 또 다른 데이터를 가지고 있습니다.

            

      - #### 5.배열(array)

        JSON에서 배열(array)이란 여러 개의 데이터가 순서를 가지고 나열된 집합을 의미합니다.

        이러한 JSON 배열은 대괄호([])로 둘러싸여 있습니다. JSON 배열은 쉼표(,)를 사용하여 여러 개의 데이터를 나열할 수 있습니다.

        이 방식은 객체에서 프로퍼티를 나열하는 것과 비슷하지만, 배열은 데이터의 값만을 나열한다는 차이가 있습니다. JSON 배열은 JSON에서 제공하는 기본 타입을 모두 저장할 수 있습니다.

        - 예제 1

          ```json
          {
              "pets": [
                  "웰시코기",
                  "포메라니안",
                  "푸들"
              ]
          }
          ```

          - JSON에서 배열의 인덱스는 언제나 0부터 시작합니다. 따라서 위의 예제에서 "웰시코기"는 0, "포메라니안"은 1, "푸들"은 2의 인덱스를 가지게 됩니다.

          

        - #### 배열과 객체의 차이점

          JSON에서 배열과 객체는 여러 데이터를 묶어놓은 집합이라는 점에서 서로 비슷한 타입입니다. 하지만 객체는 프로퍼티의 집합이며, 배열은 데이터값의 집합이라는 차이가 있습니다.

          - 예제 2

            ```json
            {
                "pets": [
                    "웰시코기",
                    "포메라니안",
                    "푸들",
                    {
                        "ownerName": "아리아나",
                        "phone": "01074480511"
                    }
                ]
            }
            ```

          - 위의 예제에서 "dog"라는 이름의 JSON 배열은 문자열뿐만 아니라 객체도 요소로 가지고 있습니다.

            대부분의 프로그래밍 언어에서 배열은 여러 타입의 데이터를 동시에 가질 수 없습니다. 하지만 자바스크립트 기반의 JSON 배열은 여러 타입의 배열 요소를 가질 수 있습니다.

            

    - #### 6.null

      JSON에서 null이란 아무런 값도 가지고 있지 않은 빈 값을 의미합니다.

      JSON에서 이러한 null 값은 항상 null을 소문자로 표기해서 사용해야 합니다.

      - 예제 

        ```json
        {
            "id": 1,
            "name": null
        }
        ```

        > > #### undefined와 null
        > >
        > > null은 자바스크립트의 undefined 타입과 혼동하기 쉽습니다.
        > >
        > > 더군다나 JSON에서는 undefined 타입을 제공하지 않으므로, 더욱 유의해야 합니다.
        > >
        > > 자바스크립트에서 '값' 자체가 없다는 의미의 undefined 값은 초기화되지 않은 변수나 존재하지 않는 값에 접근할 때 반환합니다.
        > >
        > > 하지만 JSON에서 null이란 '값'을 가지고 있지 않다는 의미를 가지는 하나의 데이터값이라고 할 수 있습니다.

        

- #### 2.JSON 스키마(schema)와 검증

  - #### 2-1)JSON 스키마(schema)

    JSON은 좀 더 쉽게 데이터를 교환하고 저장하기 위하여 만들어진 데이터 교환 표준입니다.

    이때 JSON 데이터를 전송받는 측에서는 전송받은 데이터가 적법한 형식의 데이터인지를 확인할 방법이 필요합니다.

    따라서 적법한 JSON 데이터의 형식을 기술한 문서를 JSON 스키마(schema)라고 합니다. JSON 스키마에 대한 더 자세한 사항은 다음 링크를 참고하면 됩니다.

    

  - #### 2-2)JSON 스키마 검증(validation)

    JSON 스키마는 다음과 같은 세 가지 검증 과정을 거칩니다.

    1. 데이터의 타입이 정확한가?

    2. 필수로 받아와야 하는 데이터가 포함되어 있는가?

    3. 데이터가 원하는 범위 안에 있는가?

    > > JSON 스키마에서는 위와 같은 검증 기준을 모두 키워드(keyword)를 이용하여 직접 명시할 수 있습니다.

    

  - #### 2-3)검증 키워드(validation keywords)

    JSON 스키마에서는 검증 기준을 명시하기 위해 여러 키워드를 사용할 수 있습니다. 이러한 키워드를 사용하여 데이터에 여러 가지 조건을 걸어줄 수 있습니다. 

    JSON 스키마에서 사용할 수 있는 대표적인 검증 키워드는 다음과 같습니다.

    - | 검증 키워드 | 설명                                                         |
      | ----------- | ------------------------------------------------------------ |
      | type        | 유효한  데이터의 타입을 명시함.                              |
      | properties  | 유효한 데이터 이름과 값의 쌍들을 명시함.                     |
      | required    | 명시한 배열의 모든 요소를 프로퍼티로 가지고 있어야만 유효함. |
      | minimum     | 최솟값 이상의 숫자만 유효함.                                 |
      | maximum     | 최댓값 이하의 숫자만 유효함.                                 |
      | multipleOf  | 명시한 숫자의 배수만 유효함.                                 |
      | maxLength   | 명시한 최대 길이 이하의 문자열만 유효함.                     |
      | minLength   | 명시한 최소 길이 이상의 문자열만 유효함.                     |
      | pattern     | 명시한 정규 표현식에 해당하는 문자열만 유효함.               |

    - 또, 스키마에 대한 정보를 나타내는 메타 데이터(metadata) 키워드는 다음과 같습니다.

      1. title

      2. description

      3. default

         

    - 다음 예시는 검증 키워드와 메타 데이터 키워드를 이용한 JSON 스키마 예제입니다.

      ```JSON
      {
      
          "title": "강아지 스키마",
          "description": "이 스키마는 강아지에 관한 데이터를 검증하기 위해 작성된 스키마임.",
          "type": "object",
          "properties": {
              "name": {"type": "string"},
              "family": {"type": "string"},
              "age": {"type": "integer"},
              "weight": {"type": "number"},
              "owner": {
                  "type": "object",
                  "properties": {
                      "ownerName": {"type": "string"},
                      "phone": {"type": "string"}
                  }
              }
          }
      }
      ```

      - type 키워드를 사용하여 유효한 타입을 명시하면, 해당 데이터가 유효한지를 검사할 수 있습니다.

        이때 사용할 수 있는 타입에는 JSON의 기본 타입을 모두 사용할 수 있습니다.

         properties 키워드를 사용하면, 해당 객체가 가지는 프로퍼티가 유효한지를 검사할 수 있습니다.

        

  - **2-4)다양한 데이터들의 검증**

    - 정수 검증

      type 키워드의 값을 integer로 명시하면, 해당 데이터가 정수인지를 검사해 줍니다.

      - 예제

        ```json
        {
            "type": "integer"
        }
        ```

        

    - 숫자 검증

      type 키워드의 값을 number로 명시하면, 해당 데이터가 숫자인지를 검사해 줍니다.

      이때 정수뿐만 아니라 소수부를 가지는 실수까지도 모두 검증을 통과합니다.

      - 예제

        ```JSON
        {
            "type": "number"
        }
        ```

      - 위의 예제에서 0, 10, 3.14, -4.56 등의 모든 정수와 실수는 검증을 통과합니다.

        하지만 "123"과 같은 문자열이나 true와 같은 불리언 등은 검증을 통과하지 못합니다.

        

    - 배수 검증

      multipleOf 키워드를 사용하여 해당 숫자가 명시된 숫자의 배수인지를 검사할 수 있습니다.

      다음 예제는 해당 데이터가 숫자이면서, 3의 배수인지를 검사하는 예제입니다.

      - 예제

        ```JSON
        {
            "type": "number",
            "multipleOf": 3
        }
        ```

      - 위의 예제에서 0, 3, 6, 9 등의 3의 배수인 숫자는 검증을 통과합니다.

        하지만 10, 20과 같이 3의 배수가 아닌 숫자나 "123"과 같은 문자열 등은 검증을 통과하지 못합니다.

        

    - 범위 검증

      다음과 같은 키워드를 사용하면 해당 숫자의 유효한 범위를 명시할 수 있습니다.

      1. minimum

      2. maximum

      3. exclusiveMinimum

      4. exclusiveMaximum

      > > minimum과 maximum 키워드를 사용하면 해당 숫자가 가질 수 있는 최솟값과 최댓값을 명시할 수 있습니다.
      > >
      > >  exclusiveMinimum과 exclusiveMaximum 키워드는 불리언 값을 명시할 수 있습니다.
      > >
      > > 만약 exclusiveMinimum 값이 true이면, 해당 숫자가 가질 수 있는 최솟값으로 minimum 키워드로 명시된 값을 포함하지 않고 검사합니다.
      > >
      > > 하지만 exclusiveMinimum 값이 false이면, 최솟값으로 minimum 키워드로 명시된 값까지 포함해서 검사합니다.
      > >
      > >  exclusiveMaximum 키워드도 해당 숫자가 가질 수 있는 최댓값에 대해 exclusiveMinimum과 같은 방식으로 동작합니다.
      > >
      > > exclusiveMinimum과 exclusiveMaximum 키워드는 값을 따로 명시하지 않으면, 기본값으로 false를 저장합니다.

      - ##### 예제

        ```JSON
        {
            "type": "number",
            "minimum": 1,
            "maximum": 10,
            "exclusiveMaximum": true
        }
        ```

      

    - 문자열 검증

      type 키워드의 값을 string으로 명시하면, 해당 JSON 데이터가 유니코드 문자열인지를 검사해 줍니다.

      - 예제

        ```JSON
        {
            "type": "string"
        }
        ```

      - 위의 예제에서 "제이슨", "JSON", "123" 등의 문자열은 검증을 통과합니다.

        하지만 1, 3.14와 같은 숫자나 true와 같은 불리언 등은 검증을 통과하지 못합니다.

        

    - 문자열 길이 검증

      minLength와 maxLength 키워드를 사용하여 해당 문자열의 길이가 유효한지를 검사할 수 있습니다.

      이때 minLength와 maxLength 키워드의 값은 0을 포함한 양수만을 사용할 수 있습니다.

      - 예제

        ```JSON
        {
            "type": "string",
            "minLength": 1,
            "maxLength": 4
        }
        ```

    - 정규식 표현 검증

      pattern 키워드를 사용하여 해당 문자열이 명시된 정규 표현식과 일치하는지를 검사할 수 있습니다. 정규 표현식(regular expression)은 문자열에서 특정한 규칙을 가지는 문자열의 집합을 찾아내기 위한 검색 패턴입니다.

      이러한 검색 패턴은 모든 종류의 문자열 검색이나 교체 등의 작업에서 사용될 수 있습니다. JSON에서는 자바스크립트에서 사용할 수 있는 정규 표현식 문법을 모두 사용할 수 있습니다. JSON 정규 표현식에서 주로 사용되는 패턴 문자는 다음과 같습니다.

      - | 패턴 문자 | 설명                                                         |
        | --------- | ------------------------------------------------------------ |
        | ^a        | 단어의  맨 앞에 위치한 패턴만을 검색함. (ex : 'a'로 시작하는 단어의 'a'만을 검색함.) |
        | a$        | 단어의 맨 뒤에 위치한 패턴만을 검색함. (ex : 'a'로 끝나는 단어의 'a'만을 검색함.) |
        | a(b)c     | 전체 패턴을 검색한 후에 괄호 안에 명시된 문자열을 저장함. (ex : 'abc'를 검색한 후에  b를 저장함.) |
        | [abc]     | 대괄호([]) 안에 명시된 문자를 검색함. (ex : 'abc'를 검색함.) |
        | [a-z]     | 대괄호([]) 안에 명시된 범위의 문자를 검색함. (ex : a부터 z까지의 문자를 검색함.) |
        | [^abc]    | 대괄호([]) 안에 명시된 문자 이외의 문자를 검색함. (ex : 'abc'를 제외한 문자를  검색함.) |
        | [^a-z]    | 대괄호([]) 안에 명시된 범위의 문자를 제외한 문자를 검색함. (ex : a부터 z까지의  문자를 제외한 문자를 검색함.) |
        | n+        | 앞의 문자가 1번 이상 나타날 경우를 검색함. {1, }과 같음.     |
        | n*        | 앞의 문자가 0번 이상 나타날 경우를 검색함. {0, }와 같음.     |
        | n?        | 앞의 문자가 0번 또는 1번만 나타날 경우를 검색함. {0,1}과 같음. |
        | {n}       | 앞의 문자가 정확히 n번 나타날 경우를 검색함. n은 반드시 양의 정수이어야만 함. |
        | {m,n}     | 앞의 문자가 최소 m번이상 최대 n번이하로 나타날 경우를 검색함. m과 n은 반드시 양의  정수이어야만 함. |

      - 정규 표현식에 대한 더 자세한 사항은 아래의 링크를 통해 확인할 수 있습니다.

        > > https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Regular_Expressions

      - 정규 표현식을 이용하여 데이터가 1개 이상의 문자를 가지는 문자열인지를 검사하는 예제

        - 예제

          ```JSON
          {
              "type": "string",
              "pattern": "[a-z]+"
          }
          ```

        > > ** 검증의 내용이 많아 다음주차 부터 이어서 하겠습니다.**

